<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>How to batch edit title case into sentence case for multiple items in Zotero │ YONGKANG YANG</title><link rel="stylesheet" href="/css/oasis.css"><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="YONGKANG YANG" type="application/atom+xml">
</head><body><div id="content"><h1 id="title">How to batch edit title case into sentence case for multiple items in Zotero</h1><div id="menu-outer"><nav id="menu-inner"><a id="menu-back" href="javascript:history.back()">Back</a><time datetime="2024-06-13T13:45:50.000Z">2024-06-13</time></nav></div><div id="content-outer"><div id="content-inner"><article id="post"><p>Zotero users might use APA 7<sup>th</sup> for their reference. There is a problem when the metadata in Zotero is title case, it is laborious to change it every time to sentence case. I found a java script that can take care of all items at once.</p>
<span id="more"></span> 

<p><strong>Usage:</strong> </p>
<ol>
<li>copy the code below</li>
<li>Zotero-Tools-Developer-Run JavaScript</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">zoteroPane = <span class="title class_">Zotero</span>.<span class="title function_">getActiveZoteroPane</span>();</span><br><span class="line">items = zoteroPane.<span class="title function_">getSelectedItems</span>();</span><br><span class="line"><span class="keyword">var</span> result = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">for</span> (item <span class="keyword">of</span> items) &#123;</span><br><span class="line"><span class="keyword">var</span> title = item.<span class="title function_">getField</span>(<span class="string">&#x27;title&#x27;</span>);</span><br><span class="line">result += <span class="string">&quot; &quot;</span> + title + <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> new_title = title.<span class="title function_">replace</span>(<span class="regexp">/\b([A-Z][a-z0-9]+|A)\b/g</span>, <span class="keyword">function</span> (<span class="params">x</span>) &#123; <span class="keyword">return</span> x.<span class="title function_">toLowerCase</span>(); &#125;);</span><br><span class="line">new_title = new_title.<span class="title function_">replace</span>(<span class="regexp">/(^|\?\s*)[a-z]/</span>, <span class="keyword">function</span> (<span class="params">x</span>) &#123; <span class="keyword">return</span> x.<span class="title function_">toUpperCase</span>(); &#125;);</span><br><span class="line">result += <span class="string">&quot;-&gt; &quot;</span> + new_title + <span class="string">&quot;\n\n&quot;</span>;</span><br><span class="line"><span class="comment">// // Do it at your own risk</span></span><br><span class="line"> item.<span class="title function_">setField</span>(<span class="string">&#x27;title&#x27;</span>, new_title);</span><br><span class="line"> <span class="keyword">await</span> item.<span class="title function_">saveTx</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> result;</span><br></pre></td></tr></table></figure>

<p><span style="color:#FF0000;">The only issue is that it can’t uppercase the first letter after the “:”</span> there is still minimum work to be done, but I am not an expert in Java so if you find a better way, just let me know. </p>
<p><strong>If you want all title case, you can try another script below:</strong> </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> items = <span class="title class_">ZoteroPane</span>.<span class="title function_">getSelectedItems</span>();</span><br><span class="line"><span class="keyword">var</span> n = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (item <span class="keyword">of</span> items) &#123;</span><br><span class="line">            <span class="keyword">var</span> title = item.<span class="title function_">getField</span>(<span class="string">&#x27;title&#x27;</span>);</span><br><span class="line">            new_title = <span class="title function_">titleCase</span>(title). <span class="comment">// convert to title case</span></span><br><span class="line">                            <span class="title function_">replace</span>(<span class="string">&#x27;And&#x27;</span>, <span class="string">&#x27;and&#x27;</span>). <span class="comment">// replace &#x27;And&#x27;</span></span><br><span class="line">                            <span class="title function_">replace</span>(<span class="string">&#x27;For&#x27;</span>, <span class="string">&#x27;for&#x27;</span>). <span class="comment">// replace &#x27;For&#x27;</span></span><br><span class="line">                            <span class="title function_">replace</span>(<span class="string">&#x27;In&#x27;</span>, <span class="string">&#x27;in&#x27;</span>). <span class="comment">// replace &#x27;In&#x27;</span></span><br><span class="line">                            <span class="title function_">replace</span>(<span class="string">&#x27;Of&#x27;</span>, <span class="string">&#x27;of&#x27;</span>). <span class="comment">// replace &#x27;Of&#x27;</span></span><br><span class="line">                            <span class="title function_">replace</span>(<span class="string">&#x27;With&#x27;</span>, <span class="string">&#x27;with&#x27;</span>).</span><br><span class="line">                            <span class="title function_">replace</span>(<span class="string">&#x27;Usa&#x27;</span>, <span class="string">&#x27;USA&#x27;</span>).</span><br><span class="line">                            <span class="title function_">replace</span>(<span class="string">&#x27;Dna&#x27;</span>, <span class="string">&#x27;DNA&#x27;</span>).</span><br><span class="line">                            <span class="title function_">replace</span>(<span class="string">&#x27;Pcr&#x27;</span>, <span class="string">&#x27;PCR&#x27;</span>).</span><br><span class="line">                            <span class="title function_">replace</span>(<span class="string">&#x27;Ros&#x27;</span>, <span class="string">&#x27;ROS&#x27;</span>).</span><br><span class="line">                            <span class="title function_">replace</span>(<span class="string">&#x27;To&#x27;</span>, <span class="string">&#x27;to&#x27;</span>)</span><br><span class="line">                            </span><br><span class="line">                            </span><br><span class="line">                            </span><br><span class="line">            item.<span class="title function_">setField</span>(<span class="string">&#x27;title&#x27;</span>, new_title);</span><br><span class="line">            <span class="keyword">await</span> item.<span class="title function_">saveTx</span>();</span><br><span class="line">            n ++</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> n + <span class="string">&#x27;个条目的题目大小写转为词首字母大写，有些特殊缩写单词可能转换错误，请查实。&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将单词转为首字母大写</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">titleCase</span>(<span class="params">str</span>) &#123;   </span><br><span class="line">     <span class="keyword">var</span> newStr = str.<span class="title function_">split</span>(<span class="string">&quot; &quot;</span>);    </span><br><span class="line">     <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; newStr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        newStr[i] = newStr[i].<span class="title function_">slice</span>(<span class="number">0</span>,<span class="number">1</span>).<span class="title function_">toUpperCase</span>() + newStr[i].<span class="title function_">slice</span>(<span class="number">1</span>).<span class="title function_">toLowerCase</span>();</span><br><span class="line">        &#125;      </span><br><span class="line">     <span class="keyword">return</span> newStr.<span class="title function_">join</span>(<span class="string">&quot; &quot;</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>Note: </p>
<p>Before run the script, make sure the metadata (year, author name, doi, etc.) are right. </p>
<p><strong>Reference:</strong></p>
<p>Find other useful scripts in Zotero, click: <a target="_blank" rel="noopener" href="https://github.com/redleafnew/zotero-javascripts">zotero-javascripts</a></p>
<div class="post-tags"><a class="post-tag-link" href="/tags/javascript/" rel="tag">#javascript</a>, <a class="post-tag-link" href="/tags/sentence-case/" rel="tag">#sentence case</a>, <a class="post-tag-link" href="/tags/zotero/" rel="tag">#zotero</a></div></article><div id="paginator"></div></div></div><div id="bottom-outer"><div id="bottom-inner"><hr><div><div><a>2025@ </a><a href="/atom.xml"><img src="/assets/rss.png"></a></div><div id="hexo"><a>Powered by&nbsp</a><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><a>&nbsp&&nbsp</a><a target="_blank" rel="noopener" href="https://github.com/qiantao94/hexo-theme-oasis">Oasis</a></div></div></div></div></div></body><script src="/js/oasis.js"></script></html>